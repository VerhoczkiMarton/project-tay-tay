name: SERVER - Build image and Push to ECR

on:
  push:
    paths:
      - 'tay-tay-server/src/main**'
    branches:
      - main

env:
  AWS_REGION: eu-central-1
  WORKING_DIRECTORY: ./tay-tay-server
  AWS_SERVER_ECR_REPOSITORY: tay-tay-ecr-repository-server

jobs:
  build-server:
    uses: ./.github/workflows/build_image_and_push_to_ECR.yml
    secrets: inherit
    with:
      AWS_REGION: ${{ env.AWS_REGION }}
      WORKING_DIRECTORY: ${{ env.WORKING_DIRECTORY }}
      AWS_ECR_REPOSITORY: ${{ env.AWS_SERVER_ECR_REPOSITORY }}
